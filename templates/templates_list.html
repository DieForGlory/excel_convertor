{% extends "base.html" %}

{% block title %}Управление шаблонами{% endblock %}

{% block content %}
<div class="container">
    <h1>Управление шаблонами</h1>
    
    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            {% for category, message in messages %}
                 <div class="flash {{ category }}">{{ message }}</div>
            {% endfor %}
        {% endif %}
    {% endwith %}

    <a href="/templates/new" class="btn btn-primary" style="text-decoration: none; display: inline-block; width: auto; margin-bottom: 2em;">+ Создать новый шаблон</a>

    {% if templates %}
        <table class="templates-table">
            <thead>
                <tr>
                    <th>Название шаблона</th>
                    <th>Файл Excel</th>
                    <th>ID Шаблона</th>
                    <th>Действия</th> </tr>
            </thead>
            <tbody>
                {% for tpl in templates %}
                    <tr>
                        <td>{{ tpl.template_name }}</td>
                        <td>{{ tpl.excel_file }}</td>
                        <td><code>{{ tpl.id }}</code></td>
                        <td>
                            <a href="{{ url_for('edit_template', template_id=tpl.id) }}" class="btn btn-secondary btn-sm">Редактировать</a>
                        </td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    {% else %}
        <div class="no-templates">
            <p>Пока не создано ни одного шаблона.</p>
            <p>Нажмите на кнопку выше, чтобы создать свой первый шаблон.</p>
        </div>
    {% endif %}
</div>
{% endblock %}