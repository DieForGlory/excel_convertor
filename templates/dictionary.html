{% extends "base.html" %}

{% block title %}–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–ª–æ–≤–∞—Ä–µ–º{% endblock %}

{% block content %}
<div class="container">
    <div style="text-align: center; margin-bottom: 2em;">
        <h1>–°–ª–æ–≤–∞—Ä—å —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤</h1>
        <p class="instruction-text">–ù–∞—É—á–∏—Ç–µ —Å–∏—Å—Ç–µ–º—É —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞—Ç—å —Ä–∞–∑–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã –Ω–∞–∑–≤–∞–Ω–∏–π –¥–ª—è –æ–¥–Ω–∏—Ö –∏ —Ç–µ—Ö –∂–µ —Å—Ç–æ–ª–±—Ü–æ–≤.</p>
    </div>

    <div class="dictionary-layout">

        <aside class="add-entry-card">
            <h3 id="form-title">–î–æ–±–∞–≤–∏—Ç—å –∑–∞–ø–∏—Å—å</h3>
            <form action="/dictionary/add" method="POST" id="dictionary-form">
                <div class="form-group">
                    <label for="canonical_name">–û—Å–Ω–æ–≤–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ</label>
                    <input type="text" id="canonical_name" name="canonical_name" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä, ClientFullName" required>
                </div>
                <div class="form-group">
                    <label for="synonyms">–í–∞—Ä–∏–∞–Ω—Ç—ã (—Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å: @1!)</label>
                    <input type="text" id="synonyms" name="synonyms" placeholder="–§–ò–û –ö–ª–∏–µ–Ω—Ç–∞@1!–∫–ª–∏–µ–Ω—Ç@1!–§.–ò.–û." required>
                </div>
                <button type="submit" class="btn btn-primary" style="width: 100%;">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                <button type="button" id="cancel-edit-btn" class="btn" style="width: 100%; margin-top: 10px; display: none;" onclick="cancelEdit()">–û—Ç–º–µ–Ω–∏—Ç—å</button>
            </form>
        </aside>

        <main class="dictionary-list">
            {% if dictionary %}
                {% for name, synonyms in dictionary.items() %}
                <div class="dictionary-entry-card">
                    <div class="entry-header">
                        <h2 class="canonical-name">{{ name }}</h2>
                        <div>
                            <button class="edit-btn" title="–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å/–î–æ–±–∞–≤–∏—Ç—å —Å–∏–Ω–æ–Ω–∏–º—ã"
                                    onclick="editEntry('{{ name }}', '{{ synonyms|join('@1!') }}')">‚úèÔ∏è</button>
                            <form action="/dictionary/delete" method="POST" onsubmit="return confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã?');" style="display: inline;">
                                <input type="hidden" name="canonical_name" value="{{ name }}">
                                <button type="submit" class="delete-btn" title="–£–¥–∞–ª–∏—Ç—å –∑–∞–ø–∏—Å—å">üóëÔ∏è</button>
                            </form>
                        </div>
                    </div>
                    <div class="synonym-tags">
                        {% for synonym in synonyms %}
                            <span class="synonym-tag">{{ synonym }}</span>
                        {% endfor %}
                    </div>
                </div>
                {% endfor %}
            {% else %}
                <div class="no-templates" style="width: 100%;">
                    <p>–°–ª–æ–≤–∞—Ä—å –ø–æ–∫–∞ –ø—É—Å—Ç.</p>
                </div>
            {% endif %}
        </main>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–µ—Ä–µ—Ö–æ–¥–∞ –≤ —Ä–µ–∂–∏–º —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
    function editEntry(name, synonyms) {
        // –ú–µ–Ω—è–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫ –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É –æ—Ç–º–µ–Ω—ã
        document.getElementById('form-title').textContent = '–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ: ' + name;
        document.getElementById('cancel-edit-btn').style.display = 'block';

        // –ó–∞–ø–æ–ª–Ω—è–µ–º –ø–æ–ª—è —Ñ–æ—Ä–º—ã (–±–µ–∑ –ª–∏—à–Ω–µ–≥–æ —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—è!)
        document.getElementById('canonical_name').value = name;
        document.getElementById('synonyms').value = synonyms;

        // –ë–ª–æ–∫–∏—Ä—É–µ–º –ø–æ–ª–µ —Å –æ—Å–Ω–æ–≤–Ω—ã–º –Ω–∞–∑–≤–∞–Ω–∏–µ–º
        document.getElementById('canonical_name').readOnly = true;
        document.getElementById('synonyms').focus(); // –°—Ç–∞–≤–∏–º –∫—É—Ä—Å–æ—Ä –≤ –ø–æ–ª–µ —Å–∏–Ω–æ–Ω–∏–º–æ–≤
        window.scrollTo(0, 0); // –ü—Ä–æ–∫—Ä—É—á–∏–≤–∞–µ–º —Å—Ç—Ä–∞–Ω–∏—Ü—É –Ω–∞–≤–µ—Ä—Ö –∫ —Ñ–æ—Ä–º–µ
    }

    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–º–µ–Ω—ã —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏ —Å–±—Ä–æ—Å–∞ —Ñ–æ—Ä–º—ã
    function cancelEdit() {
        // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫ –∏ –ø—Ä—è—á–µ–º –∫–Ω–æ–ø–∫—É –æ—Ç–º–µ–Ω—ã
        document.getElementById('form-title').textContent = '–î–æ–±–∞–≤–∏—Ç—å –∑–∞–ø–∏—Å—å';
        document.getElementById('cancel-edit-btn').style.display = 'none';

        // –†–∞–∑–±–ª–æ–∫–∏—Ä—É–µ–º –ø–æ–ª–µ —Å –æ—Å–Ω–æ–≤–Ω—ã–º –Ω–∞–∑–≤–∞–Ω–∏–µ–º
        document.getElementById('canonical_name').readOnly = false;

        // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –≤—Å–µ –ø–æ–ª—è —Ñ–æ—Ä–º—ã
        document.getElementById('dictionary-form').reset();
    }
</script>
{% endblock %}