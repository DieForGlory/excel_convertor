{% extends "base.html" %}

{% block title %}–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–ª–æ–≤–∞—Ä–µ–º{% endblock %}

{% block content %}
<div class="container">
    <div style="text-align: center; margin-bottom: 2em;">
        <h1>–°–ª–æ–≤–∞—Ä—å —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤</h1>
        <p class="instruction-text">–ù–∞—É—á–∏—Ç–µ —Å–∏—Å—Ç–µ–º—É —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞—Ç—å —Ä–∞–∑–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã –Ω–∞–∑–≤–∞–Ω–∏–π –¥–ª—è –æ–¥–Ω–∏—Ö –∏ —Ç–µ—Ö –∂–µ —Å—Ç–æ–ª–±—Ü–æ–≤.</p>
    </div>

    <div class="dictionary-layout">

        <aside class="add-entry-card">
            <h3>–î–æ–±–∞–≤–∏—Ç—å –∑–∞–ø–∏—Å—å</h3>
            <form action="/dictionary/add" method="POST">
                <div class="form-group">
                    <label for="canonical_name">–û—Å–Ω–æ–≤–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ</label>
                    <input type="text" id="canonical_name" name="canonical_name" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä, ClientFullName" required>
                </div>
                <div class="form-group">
                    <label for="synonyms">–í–∞—Ä–∏–∞–Ω—Ç—ã (—Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å: @1!)</label>
                    <input type="text" id="synonyms" name="synonyms" placeholder="–§–ò–û –ö–ª–∏–µ–Ω—Ç–∞@1!–∫–ª–∏–µ–Ω—Ç@1!–§.–ò.–û." required>
                </div>
                <button type="submit" class="btn btn-primary" style="width: 100%;">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
            </form>
        </aside>

        <main class="dictionary-list">
            {% if dictionary %}
                {% for name, synonyms in dictionary.items() %}
                <div class="dictionary-entry-card">
                    <div class="entry-header">
                        <h2 class="canonical-name">{{ name }}</h2>
                        <div>
                            <button class="edit-btn" title="–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å/–î–æ–±–∞–≤–∏—Ç—å —Å–∏–Ω–æ–Ω–∏–º—ã"
                                    onclick="editEntry('{{ name }}', '{{ synonyms|join('@1!') }}')">‚úèÔ∏è</button>
                            <form action="/dictionary/delete" method="POST" onsubmit="return confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã?');" style="display: inline;">
                                <input type="hidden" name="canonical_name" value="{{ name }}">
                                <button type="submit" class="delete-btn" title="–£–¥–∞–ª–∏—Ç—å –∑–∞–ø–∏—Å—å">üóëÔ∏è</button>
                            </form>
                        </div>
                    </div>
                    <div class="synonym-tags">
                        {% for synonym in synonyms %}
                            <span class="synonym-tag">{{ synonym }}</span>
                        {% endfor %}
                    </div>
                </div>
                {% endfor %}
            {% else %}
                <div class="no-templates" style="width: 100%;">
                    <p>–°–ª–æ–≤–∞—Ä—å –ø–æ–∫–∞ –ø—É—Å—Ç.</p>
                </div>
            {% endif %}
        </main>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
    function editEntry(name, synonyms) {
        document.getElementById('canonical_name').value = name;
        // –ò–ó–ú–ï–ù–ï–ù–ò–ï 3: –û–±–Ω–æ–≤–ª—è–µ–º —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å –≤ JS
        document.getElementById('synonyms').value = synonyms + '@1!';

        document.getElementById('form-title').textContent = '–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ: ' + name;
        document.getElementById('canonical_name').readOnly = true;
        document.getElementById('synonyms').focus();
    }
</script>
{% endblock %}